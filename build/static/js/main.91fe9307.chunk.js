(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{23:function(e,t,n){e.exports=n(34)},24:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);n(24);var a=n(0),o=n.n(a),r=n(20),u=n.n(r),l=n(7),c=n(8),s=n(10),i=n(9),d=n(11),p=n(12);function h(e){return o.a.createElement("div",null,o.a.createElement("h2",null,"quickly adopt a new friend"),o.a.createElement("p",null,"welcome to petful, your one stop shop to adopting a cat or a dog."),o.a.createElement(p.b,{to:"/adopt"},o.a.createElement("button",null,"Lets adopt a Pet")))}var m=n(17),f="https://dsa-petful.herokuapp.com",E={getPeople:function(){return fetch("".concat(f,"/people"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},addPerson:function(e){return fetch("".concat(f,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({person:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},g={getPets:function(){return fetch("".concat(f,"/pets"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},adopt:function(e){return fetch("".concat(f,"/pets"),{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({type:e})}).then((function(e){return console.log(e.ok),e.ok?e.ok:function(e){return Promise.reject(e)}}))}};o.a.Component;function b(e){var t=e.pet,n=t.age,a=t.breed,r=t.description,u=t.gender,l=t.imageURL,c=t.name,s=t.story;return o.a.createElement("div",{className:"pet"},o.a.createElement("h1",null,c),o.a.createElement("img",{src:l}),o.a.createElement("h3",null,"Breed: ",a),o.a.createElement("h3",null,"Gender: ",u),o.a.createElement("h3",null,"Age: ",n),o.a.createElement("h3",null,r),o.a.createElement("p",null,s))}b.defaultProps={pet:{age:0,breed:"nonoe",description:"no description",gender:"no gender",imageURL:"no imgURL",name:"no name",story:"no story"}};var j=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(i.a)(t).call(this,e))).updateData=function(){E.getPeople().then((function(e){n.setState({people:e})})),g.getPets().then((function(e){n.setState({dog:e.dog,cat:e.cat,loaded:!0})}))},n.handleAdopt=function(){var e=Math.random()>=.5?"cat":"dog";g.adopt(e).then((function(){n.updateData()}))},n.handleUserAdopt=function(e){g.adopt(e).then((function(){n.setState({userInQueue:null,userAdopted:!0,adoptedPet:n.state[e]})})).then((function(){n.updateData()}))},n.handleJoinQueue=function(){n.state.userInQueue||E.addPerson("You").then((function(e){n.setState({userInQueue:"You"}),n.updateData()}))},n.fakeIteration=function(){n.state.userInQueue&&n.state.userInQueue!==n.state.people[0]&&n.state.people.length<10&&E.addPerson(n.state.names[Math.floor(Math.random()*n.state.names.length)]).then((function(){setTimeout(n.handleAdopt,2e3)})).then((function(){n.updateData()}))},n.state={people:[],names:["Agatha","Brinette","Chris","Desdemona","Evelyn","Francis","Grant"],dog:[],cat:[],loaded:!1,userInQueue:null,userAdopted:!1,adoptedPet:null},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateData(),setInterval(this.fakeIteration,5e3)}},{key:"render",value:function(){var e=this,t=this.state,n=t.people,a=t.userInQueue;return o.a.createElement("div",null,this.state.userAdopted&&o.a.createElement("div",null,o.a.createElement("h1",null,"Congrats, you adopted:"),o.a.createElement(b,{pet:this.state.adoptedPet})),!this.state.userAdopted&&o.a.createElement("div",null,!this.state.userInQueue&&o.a.createElement("button",{onClick:this.handleJoinQueue},"Join Queue"),o.a.createElement("h4",null,"Current Adoption Queue: ",this.state.people.length),o.a.createElement("ul",null,n.map((function(e,t){return 0===t?o.a.createElement("li",{key:t,style:{fontSize:40}},"Currently Up: ",e):t<10?o.a.createElement("li",{key:t},e):void 0}))),o.a.createElement("div",{className:"pet-box"},a===n[0]&&o.a.createElement("button",{onClick:function(){return e.handleUserAdopt("cat")}},"Adopt ",this.state.cat.name),a===n[0]&&o.a.createElement("button",{onClick:function(){return e.handleUserAdopt("dog")}},"Adopt ",this.state.dog.name)),o.a.createElement("div",{className:"pet-box"},o.a.createElement(b,{pet:this.state.cat}),o.a.createElement(b,{pet:this.state.dog}))))}}]),t}(o.a.Component),y=n(5),v=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(i.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Petful"),o.a.createElement(y.b,null,o.a.createElement(h,{exact:!0,path:"/"}),o.a.createElement(j,{path:"/adopt"})))}}]),t}(o.a.Component);u.a.render(o.a.createElement(p.a,null,o.a.createElement(v,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.91fe9307.chunk.js.map